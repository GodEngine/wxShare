## 使用流程

------

用来实现微信内二次分享时的指定分享的title(标题)、desc（描述）、img（缩略图）。步骤：

> * 配置微信公众号后台
> * 搭建微信二次分享所需的服务端
> * 前端js配置

------


### 1.  配置微信公众号后台
>1 登录属于“服务号”的微信公众平台(非服务号可以return了)。
>2 准备好自己的appid和appSecret
>3 进入**公众号设置**—>**功能设置**->**js接口安全域名**
>4 在**js接口安全域名**设置中添加网页的域名（按提示在网页所在服务器上放一个文件,用以验证）
>5 进入**基本配置**->**ip白名单**
>6 选择**修改**，添加网页服务器的出口ip（在不填写或填错的情况下，请求微信接口会有一个提示错误msg，‘* . * . * . *’不在ip白名单内，该‘* . * . * . *’就是你的服务器出口ip）
>7 至此，微信平台设置完毕




### 2. 搭建服务端接口服务
>1 前端请求微信接口存在跨域问题。
>2 服务端接口中使用appid和appSecret来请求微信接口，拿到access_token
>3 再用access_token请求微信接口拿到ticket
>4 加密包含以上俩个参数和其他如url、timestamp等参数，返回给前端。
>5 具体逻辑参考route下代码或者微信开发者文档。


### 3. 前端js配置
>1 引入微信jssdk(res.wx.qq.com/open/js/jweixin-1.2.0.js)
>2 src下执行gulp js，拿到生成的js脚本（es6需要编译下）。包含了配置wxConfig，即标题、描述、缩略图等配置，访问接口数据等逻辑